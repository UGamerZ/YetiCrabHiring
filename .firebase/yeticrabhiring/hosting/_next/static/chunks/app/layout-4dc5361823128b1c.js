(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{75080:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,32137,23)),Promise.resolve().then(s.t.bind(s,27059,23)),Promise.resolve().then(s.bind(s,8365)),Promise.resolve().then(s.bind(s,64953)),Promise.resolve().then(s.t.bind(s,11126,23))},8365:(e,t,s)=>{"use strict";s.r(t),s.d(t,{App:()=>i});var a=s(95155);s(12115);var n=s(64953);let i=()=>(0,a.jsx)(n.Wrapper,{})},64953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{DEFAULT_BODY_CLASSNAME:()=>k,Wrapper:()=>v});var a=s(95155),n=s(12115),i=s(29112),r=s(7797),l=s(71221),d=s(33792);s(38231);var o=s(82651);let c="https://c126588c87fabf26.mokky.dev",h=async e=>(await o.A.get(`${c}/fancyPlaces`,{params:e})).data,p=async e=>{await o.A.post(`${c}/fancyPlaces`,e)},m=async(e,t)=>{await o.A.patch(`${c}/fancyPlaces/${t}`,e)},x=async e=>{await o.A.delete(`${c}/fancyPlaces/${e}`)},u=({onChange:e,open:t,setOpen:s,isForCreating:i,objId:l})=>{let[d,o]=(0,n.useState)(!1),[c,h]=(0,n.useState)(!1),x=e=>{!Number.isNaN(parseFloat(e))&&parseFloat(e)>=1&&5>=parseFloat(e)?h(!0):h(!1)},[u,j]=(0,n.useState)(""),[g,S]=(0,n.useState)(""),[w,y]=(0,n.useState)(1),[k,v]=(0,n.useState)(""),[C,f]=(0,n.useState)(""),[F,A]=(0,n.useState)(""),N={name:u,desc:g,dateTime:new Date().toLocaleDateString("ru",{hour:"numeric",minute:"numeric"}),rating:w,picture:k,placeText:C,coordinates:F,mapLink:"",status:"Осмотрена"};return(0,a.jsxs)(r.aF,{open:t,onClose:()=>{s(!1),h(!1)},children:[(0,a.jsx)("h2",{children:i?"Добавление достопримечательности":"Изменение достопримечательности"}),(0,a.jsxs)(r.Zp,{style:{},children:[(0,a.jsx)(r.ks,{onUpdate:e=>{j(e)},size:"l",placeholder:"Имя достопримечательности..."}),(0,a.jsx)(r.ks,{onUpdate:e=>{S(e)},size:"l",placeholder:"Описание..."}),(0,a.jsx)(r.ks,{onUpdate:e=>{x(e),y(parseFloat(e))},size:"l",endContent:!c&&(0,a.jsx)(r.JU,{theme:"danger",children:"Рейтинг должен быть в диапазоне от 1 до 5"}),placeholder:"Рейтинг..."}),(0,a.jsx)(r.ks,{onUpdate:e=>{v(e)},size:"l",placeholder:"Ссылка на изображение достопримечательности..."}),(0,a.jsx)(r.ks,{onUpdate:e=>{f(e)},size:"l",placeholder:"Местоположение..."}),(0,a.jsx)(r.ks,{onUpdate:e=>{A(e)},size:"l",placeholder:"Координаты местоположения..."}),(0,a.jsx)(r.$n,{size:"l",onClick:()=>{o(!0)},children:i?"Добавить достопримечательность":"Изменить достопримечательность"}),c?(0,a.jsx)(r.aF,{open:d,onClose:()=>{o(!1),s(!1),h(!1),i?p(N).then(()=>{e()}):m(N,l).then(()=>{e()})},children:i?"Достопримечательность успешно добавлена":"Достопримечательность успешно изменена"}):(0,a.jsx)(r.aF,{open:d,onClose:()=>o(!1),children:"Исправьте все ошибки в указаных значениях"})]})]})},j=(e,t,s,n,i,l,d,o,c)=>({id:e,name:t,desc:s,dateTime:n,rating:i,picture:(0,a.jsx)("div",{style:{width:"100%",height:0,paddingBottom:"100%"},children:(0,a.jsx)("img",{style:{width:"100%"},src:l})}),placeText:d,coordinates:o,mapLink:(0,a.jsx)(r.N_,{href:`https://www.google.com/maps/place/${o}`,children:"Тыкни меня"}),status:(0,a.jsx)(r.Sc,{children:c})}),g=({Update:e,isAdmin:t,onChange:s})=>{let[i,l]=(0,n.useState)(0),d=(0,r.t2)((0,r.E2)(r.XI)),[o,c]=n.useState(""),[p,m]=n.useState(1),[g,S]=n.useState(1),[w,y]=n.useState([]),[k,v]=n.useState(!1),[C,f]=n.useState(!1),[F,A]=(0,n.useState)(!1);if(n.useEffect(()=>{(async()=>{try{v(!0);let e=await h({limit:3,page:p,...o&&{name:o+"*"}});y(e.items),S(e.meta.total_items)}catch(e){console.error(e),y([]),S(1)}finally{v(!1)}})().finally(()=>{f(!0)})},[o,p,e]),!C)return(0,a.jsx)(r.aH,{});let N=window.innerWidth-.03*window.innerWidth;return(0,a.jsx)(r.Zp,{children:(0,a.jsxs)("main",{style:{width:N},children:[F&&(0,a.jsx)(u,{onChange:s,open:F,setOpen:A,isForCreating:!1,objId:i}),(0,a.jsx)(r.ks,{onUpdate:e=>{c(e)},endContent:k&&(0,a.jsx)(r.aH,{size:"s"}),type:"search",placeholder:"Поиск достопримечательности по имени..."}),(0,a.jsx)(d,{data:w.map(e=>j(e.id,e.name,e.desc,e.dateTime,e.rating,e.picture,e.placeText,e.coordinates,e.status)),columns:[{id:"id"},{id:"name",name:"Имя",width:1,meta:{sort:!0}},{id:"desc",name:"Описание"},{id:"dateTime",name:"Дата и время добавления",meta:{sort:!0}},{id:"rating",name:"Рейтинг",meta:{sort:!0}},{id:"picture",name:"Фото"},{id:"placeText",name:"Местоположение"},{id:"coordinates",name:"Координаты"},{id:"mapLink",name:"Ссылка на Google Maps"},{id:"status",name:"Состояние",meta:{sort:!0}}],getRowActions:e=>t?[{text:`Изменить`,handler:()=>{A(!0),l(e.id)}},{text:"Удалить",handler:()=>{x(e.id).then(()=>{s()})}}]:[{text:"",handler:()=>{}}]}),(0,a.jsxs)(r.JU,{theme:"info",children:["Всего достопримечательностей: ",g]}),(0,a.jsx)(r.dK,{page:p,total:g,pageSize:3,onUpdate:function(e){m(e)}})]})})},S=()=>(0,a.jsx)(r.Zp,{style:{marginBottom:"2%"},children:(0,a.jsx)("h1",{children:"Достопримечательности"})}),w=(0,i.A)("wrapper"),y="dark",k=`g-root g-root_theme_${y}`,v=()=>{let[e,t]=n.useState(y),s=e===y,[i,o]=(0,n.useState)(!1),[c,h]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),x=()=>{!0==p?m(!1):m(!0)};return(0,a.jsx)(r.NP,{theme:e,children:(0,a.jsxs)("div",{className:w(),children:[(0,a.jsxs)("div",{className:w("theme-button"),children:[(0,a.jsx)(r.$n,{style:{marginRight:"2%"},size:"l",view:"outlined",onClick:()=>{t(s?"light":y)},children:(0,a.jsx)(r.In,{data:s?l.A:d.A})}),c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.$n,{style:{marginRight:"2%"},onClick:()=>o(!0),children:"Добавить достопримечательность"}),(0,a.jsx)(u,{onChange:x,open:i,setOpen:o,isForCreating:!0,objId:0})]}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)(r.$n,{onClick:()=>{c?h(!1):h(!0)},children:c?(0,a.jsx)(a.Fragment,{children:"Перейти в режим пользователя"}):(0,a.jsx)(a.Fragment,{children:"Перейти в режим администратора"})})]}),(0,a.jsx)(r.Zp,{children:(0,a.jsx)("div",{className:w("layout"),children:(0,a.jsxs)("div",{className:w("content"),children:[(0,a.jsx)(S,{}),(0,a.jsx)(g,{Update:p,onChange:x,isAdmin:c})]})})})]})})}},38231:()=>{},11126:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[176,50,92,215,135,980,113,545,472,793,441,517,358],()=>t(75080)),_N_E=e.O()}]);